name: Telegram Push Notification

on:
  push:

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send Telegram message
        run: |
          REPO="${{ github.repository }}"
          BRANCH="${{ github.ref_name }}"
          TIME="${{ github.event.head_commit.timestamp }}"
          AUTHOR="${{ github.event.head_commit.author.name }}"
          MESSAGE="${{ github.event.head_commit.message }}"

          TEXT="Push Detected

          Repository: ${REPO}
          Branch: ${BRANCH}
          Author: ${AUTHOR}
          Time: ${TIME}

          Commit Message:
          ${MESSAGE}"

          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
            -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
            -d text="$TEXT"

